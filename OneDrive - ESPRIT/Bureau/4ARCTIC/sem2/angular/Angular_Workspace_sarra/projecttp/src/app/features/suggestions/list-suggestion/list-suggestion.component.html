<div class="suggestions-container">
  <div class="page-header">
    <h1 class="page-title">Liste des suggestions</h1>
  </div>
<div class="suggestions-container">
  <div class="page-header">
    <h1 class="page-title">Liste des suggestions</h1>
    <!-- BOUTON AJOUTER SUGGESTION -->
    <button class="btn-add-suggestion" (click)="navigateToAddForm()">
      <span class="btn-icon">â•</span>
      <span>Ajouter une suggestion</span>
    </button>
  </div>
  <!-- Boutons pour afficher favoris et refusÃ©es -->
  <div class="filter-buttons">
    <button 
      class="filter-btn" 
      [class.active]="showFavorites"
      (click)="toggleFavorites()"
    >
      <span class="btn-icon">â¤ï¸</span>
      <span>Mes Favoris ({{ favorites.length }})</span>
    </button>
    
    <button 
      class="filter-btn" 
      [class.active]="showRefused"
      (click)="toggleRefused()"
    >
      <span class="btn-icon">âŒ</span>
      <span>Suggestions RefusÃ©es ({{ refusedSuggestions.length }})</span>
    </button>
  </div>

  <!-- Barre de recherche -->
  <div class="search-container">
    <div class="search-wrapper">
      <span class="search-icon">ğŸ”</span>
      <input 
        type="text" 
        class="search-input" 
        placeholder="Rechercher une suggestion par titre ou catÃ©gorie..."
        [(ngModel)]="searchTerm"
      >
    </div>
  </div>

  <!-- Liste des suggestions -->
  <div class="suggestions-grid">
    <div 
      *ngFor="let suggestion of filteredSuggestions" 
      class="suggestion-card"
    >
      <!-- En-tÃªte de la carte -->
      <div class="card-header">
        <h2 class="card-title">{{ suggestion.title }}</h2>
        <span class="category-badge">{{ suggestion.category }}</span>
      </div>

      <!-- Date -->
      <div class="card-date">
        <span class="date-icon">ğŸ“…</span>
        <span>{{ suggestion.date | date: 'dd MMM yyyy' }}</span>
      </div>

      <!-- Description -->
      <p class="card-description">{{ suggestion.description }}</p>

      <!-- Statut -->
      <div class="card-status">
        <span [class]="'status-badge ' + getStatusClass(suggestion.status)">
          {{ getStatusText(suggestion.status) }}
        </span>
      </div>

      <!-- Actions (boutons) -->
      <div class="card-actions">
        <!-- Boutons Like et Favoris uniquement si NON refusÃ©e -->
        <ng-container *ngIf="suggestion.status !== 'refusee'">
          <button 
            class="btn btn-like" 
            (click)="likeSuggestion(suggestion)"
          >
            <span class="btn-icon">ğŸ‘</span>
            <span class="btn-text">Like {{ suggestion.nbLikes }}</span>
          </button>

          <button 
            class="btn btn-favorite" 
            (click)="addToFavorites(suggestion)"
          >
            <span class="btn-icon">â¤ï¸</span>
            <span class="btn-text">Ajouter aux favoris</span>
          </button>
        </ng-container>
        
        <!-- Bouton DÃ©tails TOUJOURS affichÃ© -->
        <button 
          class="btn btn-details" 
          [routerLink]="['/suggestions', suggestion.id]"
        >
          <span class="btn-icon">ğŸ”</span>
          <span class="btn-text">DÃ©tails</span>
        </button>
      </div>
    </div>
  </div>

  <!-- Message si aucune suggestion trouvÃ©e -->
  <div *ngIf="filteredSuggestions.length === 0" class="no-results">
    <p class="no-results-icon">ğŸ”</p>
    <p class="no-results-text">Aucune suggestion trouvÃ©e pour "{{ searchTerm }}"</p>
  </div>

  <!-- Section Favoris -->
  <div *ngIf="showFavorites" class="favorites-section">
    <div class="section-header">
      <h2 class="section-title">
        <span class="title-icon">â¤ï¸</span>
        Mes Suggestions Favorites
      </h2>
      <button class="close-btn" (click)="toggleFavorites()">
        âœ• Fermer
      </button>
    </div>

    <div *ngIf="favorites.length === 0" class="empty-state">
      <p class="empty-icon">ğŸ’”</p>
      <p class="empty-text">Vous n'avez pas encore de favoris</p>
      <p class="empty-subtext">Cliquez sur "Ajouter aux favoris" pour sauvegarder vos suggestions prÃ©fÃ©rÃ©es</p>
    </div>

    <div class="suggestions-grid" *ngIf="favorites.length > 0">
      <div 
        *ngFor="let suggestion of favorites" 
        class="suggestion-card favorite-card"
      >
        <!-- En-tÃªte de la carte -->
        <div class="card-header">
          <h2 class="card-title">{{ suggestion.title }}</h2>
          <span class="category-badge">{{ suggestion.category }}</span>
        </div>

        <!-- Date -->
        <div class="card-date">
          <span class="date-icon">ğŸ“…</span>
          <span>{{ suggestion.date | date: 'dd MMM yyyy' }}</span>
        </div>

        <!-- Description -->
        <p class="card-description">{{ suggestion.description }}</p>

        <!-- Statut -->
        <div class="card-status">
          <span [class]="'status-badge ' + getStatusClass(suggestion.status)">
            {{ getStatusText(suggestion.status) }}
          </span>
        </div>

        <!-- Nombre de likes -->
        <div class="likes-display">
          <span class="likes-icon">ğŸ‘</span>
          <span class="likes-count">{{ suggestion.nbLikes }} likes</span>
        </div>

        <!-- Actions favoris -->
        <div class="card-actions">
          <button 
            class="btn btn-remove" 
            (click)="removeFromFavorites(suggestion)"
          >
            <span class="btn-icon">ğŸ—‘ï¸</span>
            <span class="btn-text">Retirer des favoris</span>
          </button>
          
          <button 
            class="btn btn-details" 
            [routerLink]="['/suggestions', suggestion.id]"
          >
            <span class="btn-icon">ğŸ”</span>
            <span class="btn-text">DÃ©tails</span>
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Section Suggestions RefusÃ©es -->
  <div *ngIf="showRefused" class="refused-section">
    <div class="section-header">
      <h2 class="section-title">
        <span class="title-icon">âŒ</span>
        Suggestions RefusÃ©es
      </h2>
      <button class="close-btn" (click)="toggleRefused()">
        âœ• Fermer
      </button>
    </div>

    <div *ngIf="refusedSuggestions.length === 0" class="empty-state">
      <p class="empty-icon">âœ…</p>
      <p class="empty-text">Aucune suggestion refusÃ©e</p>
      <p class="empty-subtext">Toutes les suggestions sont acceptÃ©es ou en attente</p>
    </div>

    <div class="suggestions-grid" *ngIf="refusedSuggestions.length > 0">
      <div 
        *ngFor="let suggestion of refusedSuggestions" 
        class="suggestion-card refused-card"
      >
        <!-- En-tÃªte de la carte -->
        <div class="card-header">
          <h2 class="card-title">{{ suggestion.title }}</h2>
          <span class="category-badge refused-badge">{{ suggestion.category }}</span>
        </div>

        <!-- Date -->
        <div class="card-date">
          <span class="date-icon">ğŸ“…</span>
          <span>{{ suggestion.date | date: 'dd MMM yyyy' }}</span>
        </div>

        <!-- Description -->
        <p class="card-description">{{ suggestion.description }}</p>

        <!-- Statut -->
        <div class="card-status">
          <span [class]="'status-badge ' + getStatusClass(suggestion.status)">
            {{ getStatusText(suggestion.status) }}
          </span>
        </div>

        <!-- Raison du refus -->
        <div class="refusal-reason">
          <p class="reason-title">Raison du refus :</p>
          <p class="reason-text">Cette suggestion ne correspond pas aux prioritÃ©s actuelles de l'organisation.</p>
        </div>

        <!-- Bouton DÃ©tails pour les refusÃ©es -->
        <div class="card-actions">
          <button 
            class="btn btn-details" 
            [routerLink]="['/suggestions', suggestion.id]"
          >
            <span class="btn-icon">ğŸ”</span>
            <span class="btn-text">Voir les dÃ©tails</span>
          </button>
        </div>
      </div>
    </div>
  </div>
</div>